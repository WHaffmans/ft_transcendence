FROM node:20-alpine

WORKDIR /app

# Install dependencies
COPY package*.json ./
RUN npm install

# Install a simple http server for serving static files
RUN npm install -g http-server

# Source code will be mounted as volumes
# TypeScript will compile in watch mode
# http-server will serve the built files

EXPOSE 8080

# Start TypeScript watch in background and http-server in foreground
CMD sh -c "npm run watch & http-server src -p 8080 -c-1"
